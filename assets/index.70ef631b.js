import{u as v,a as N,c as P,o as F,r as B,U as m,g as h,h as b,j as e,C as w,N as E,p as z,L as f,k as u,m as C,P as R,n as D,q as y,H as G,s as H}from"./index.4e17b61c.js";import{P as T,p as W}from"./Product.21c19ca3.js";import{B as S}from"./Button.d45faafc.js";import{I as _}from"./InputNumber.5fc647f3.js";function $({queryConfig:t}){var g;const{t:s}=v(),r=N(),{control:c,handleSubmit:l,trigger:a,reset:n,formState:{errors:i}}=P({defaultValues:{price_min:t.price_min||"",price_max:t.price_max||""},resolver:F(z),shouldFocusError:!1});B.exports.useEffect(()=>{const{price_min:o,price_max:j}=t;!o&&!j&&n({price_min:"",price_max:""})},[t.price_min,t.price_max]);const p=l(o=>{const{price_min:j="",price_max:A=""}=o;r({pathname:m.productList,search:h(b.exports.omitBy({...t,price_min:j,price_max:A},L=>L==="")).toString()})});return e.exports.jsxs("form",{className:"mt-2",onSubmit:p,children:[e.exports.jsxs("div",{className:"flex items-start",children:[e.exports.jsx(w,{control:c,name:"price_min",render:({field:o})=>e.exports.jsx(_,{type:"text",className:"grow",placeholder:s("price min"),classNameInput:"p-1 w-full outline-none border border-gray-300 focus:border-gray-500 rounded-sm focus:shadow-sm",classNameError:"hidden",value:o.value,ref:o.ref,onChange:j=>{o.onChange(j),a("price_max")}})}),e.exports.jsx("div",{className:"mx-2 mt-2 shrink-0",children:"-"}),e.exports.jsx(w,{control:c,name:"price_max",render:({field:o})=>e.exports.jsx(_,{type:"text",className:"grow",placeholder:s("price max"),classNameInput:"p-1 w-full outline-none border border-gray-300 focus:border-gray-500 rounded-sm focus:shadow-sm",classNameError:"hidden",value:o.value,ref:o.ref,onChange:j=>{o.onChange(j),a("price_min")}})})]}),e.exports.jsx("div",{className:"mt-1 min-h-[1.25rem] text-center text-sm text-red-600",children:(g=i.price_min)!=null&&g.message?s(`${E}:${i.price_min.message}`):""}),e.exports.jsx(S,{className:"flex w-full items-center justify-center bg-orange p-2 text-sm uppercase text-white hover:bg-orange/80",children:s("apply")})]})}function I({queryConfig:t}){const{t:s}=v(),r=N(),c=l=>{r({pathname:m.productList,search:h({...t,rating_filter:String(l)}).toString()})};return e.exports.jsx("ul",{className:"my-3",children:Array(5).fill(0).map((l,a)=>e.exports.jsx("li",{className:"py-1 pl-2",children:e.exports.jsxs("div",{className:"flex cursor-pointer items-center text-sm",onClick:()=>c(5-a),tabIndex:0,role:"button","aria-hidden":"true",children:[Array(5).fill(0).map((n,i)=>i<5-a?e.exports.jsxs("svg",{viewBox:"0 0 9.5 8",className:"mr-1 h-4 w-4",children:[e.exports.jsxs("defs",{children:[e.exports.jsxs("linearGradient",{id:"ratingStarGradient",x1:"50%",x2:"50%",y1:"0%",y2:"100%",children:[e.exports.jsx("stop",{offset:0,stopColor:"#ffca11"}),e.exports.jsx("stop",{offset:1,stopColor:"#ffad27"})]}),e.exports.jsx("polygon",{id:"ratingStar",points:"14.910357 6.35294118 12.4209136 7.66171903 12.896355 4.88968305 10.8823529 2.92651626 13.6656353 2.52208166 14.910357 0 16.1550787 2.52208166 18.9383611 2.92651626 16.924359 4.88968305 17.3998004 7.66171903"})]}),e.exports.jsx("g",{fill:"url(#ratingStarGradient)",fillRule:"evenodd",stroke:"none",strokeWidth:1,children:e.exports.jsx("g",{transform:"translate(-876 -1270)",children:e.exports.jsx("g",{transform:"translate(155 992)",children:e.exports.jsx("g",{transform:"translate(600 29)",children:e.exports.jsx("g",{transform:"translate(10 239)",children:e.exports.jsx("g",{transform:"translate(101 10)",children:e.exports.jsx("use",{stroke:"#ffa727",strokeWidth:".5",xlinkHref:"#ratingStar"})})})})})})})]},i):e.exports.jsxs("svg",{viewBox:"0 0 30 30",className:"mr-1 h-4 w-4",children:[e.exports.jsx("defs",{children:e.exports.jsxs("linearGradient",{id:"star__hollow",x1:"50%",x2:"50%",y1:"0%",y2:"99.0177926%",children:[e.exports.jsx("stop",{offset:"0%",stopColor:"#FFD211"}),e.exports.jsx("stop",{offset:"100%",stopColor:"#FFAD27"})]})}),e.exports.jsx("path",{fill:"none",fillRule:"evenodd",stroke:"url(#star__hollow)",strokeWidth:2,d:"M23.226809 28.390899l-1.543364-9.5505903 6.600997-6.8291523-9.116272-1.4059447-4.01304-8.63019038-4.013041 8.63019038-9.116271 1.4059447 6.600997 6.8291523-1.543364 9.5505903 8.071679-4.5038874 8.071679 4.5038874z"})]},i)),a!==0&&e.exports.jsx("span",{children:s("rating up")})]})},a))})}function U({queryConfig:t,categories:s}){const{t:r}=v(),{category:c}=t,l=N(),a=()=>{l({pathname:m.productList,search:h(b.exports.omit(t,["category","price_min","price_max","rating_filter"])).toString()})};return e.exports.jsxs("div",{className:"py-4",children:[e.exports.jsxs(f,{to:{pathname:m.productList,search:h(b.exports.omit(t,["category"])).toString()},className:u("flex items-center font-bold",{"text-orange":!c}),children:[e.exports.jsx("svg",{viewBox:"0 0 12 10",className:"mr-3 h-4 w-3 fill-current",children:e.exports.jsx("g",{fillRule:"evenodd",stroke:"none",strokeWidth:1,children:e.exports.jsx("g",{transform:"translate(-373 -208)",children:e.exports.jsx("g",{transform:"translate(155 191)",children:e.exports.jsxs("g",{transform:"translate(218 17)",children:[e.exports.jsx("path",{d:"m0 2h2v-2h-2zm4 0h7.1519633v-2h-7.1519633z"}),e.exports.jsx("path",{d:"m0 6h2v-2h-2zm4 0h7.1519633v-2h-7.1519633z"}),e.exports.jsx("path",{d:"m0 10h2v-2h-2zm4 0h7.1519633v-2h-7.1519633z"})]})})})})}),r("all categories")]}),e.exports.jsx("div",{className:"my-4 h-[1px] bg-gray-300"}),e.exports.jsx("ul",{children:s.map(n=>{const i=c===n._id;return e.exports.jsx("li",{className:"py-2 pl-2",children:e.exports.jsxs(f,{to:{pathname:m.productList,search:h({...t,category:n._id}).toString()},className:u("relative px-2",{"font-semibold text-orange":i}),children:[e.exports.jsx("svg",{viewBox:"0 0 4 7",className:"absolute top-1 left-[-10px] h-2 w-2 fill-orange",children:e.exports.jsx("polygon",{points:"4 3.5 0 0 0 7"})}),n.name]})},n._id)})}),e.exports.jsxs("div",{className:"mt-4 flex items-center font-bold uppercase",children:[e.exports.jsx("svg",{enableBackground:"new 0 0 15 15",viewBox:"0 0 15 15",x:0,y:0,className:"mr-3 h-4 w-3 fill-current stroke-current",children:e.exports.jsx("g",{children:e.exports.jsx("polyline",{fill:"none",points:"5.5 13.2 5.5 5.8 1.5 1.2 13.5 1.2 9.5 5.8 9.5 10.2",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10})})}),r("filter search")]}),e.exports.jsx("div",{className:"my-4 h-[1px] bg-gray-300"}),e.exports.jsxs("div",{className:"my-5",children:[e.exports.jsx("div",{children:r("price range")}),e.exports.jsx($,{queryConfig:t})]}),e.exports.jsx("div",{className:"my-4 h-[1px] bg-gray-300"}),e.exports.jsx("div",{className:"text-sm",children:r("rating")}),e.exports.jsx(I,{queryConfig:t}),e.exports.jsx("div",{className:"my-4 h-[1px] bg-gray-300"}),e.exports.jsx(S,{className:"flex w-full items-center justify-center bg-orange p-2 text-sm uppercase text-white hover:bg-orange/80",onClick:a,children:r("clear all")})]})}const x={createdAt:"createdAt",view:"view",sold:"sold",price:"price"},k={asc:"asc",desc:"desc"};function K({queryConfig:t}){const{t:s}=v(),r=N(),{sort_by:c=x.createdAt,order:l}=t,a=p=>c===p,n=p=>{r({pathname:m.productList,search:h(b.exports.omit({...t,sort_by:p},["order"])).toString()})},i=p=>{r({pathname:m.productList,search:h({...t,sort_by:x.price,order:p}).toString()})};return e.exports.jsx("div",{className:"bg-gray-300/40 py-4 px-3",children:e.exports.jsx("div",{className:"flex flex-wrap items-center justify-between gap-2",children:e.exports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.exports.jsx("div",{children:s("sort by")}),e.exports.jsx("button",{onClick:()=>n(x.view),className:u("h-8 px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80":a(x.view),"bg-white text-black hover:bg-slate-100":!a(x.view)}),children:s("popular")}),e.exports.jsx("button",{onClick:()=>n(x.createdAt),className:u("h-8 px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80":a(x.createdAt),"bg-white text-black hover:bg-slate-100":!a(x.createdAt)}),children:s("latest")}),e.exports.jsx("button",{onClick:()=>n(x.sold),className:u("h-8 px-4 text-center text-sm capitalize ",{"bg-orange text-white hover:bg-orange/80":a(x.sold),"bg-white text-black hover:bg-slate-100":!a(x.sold)}),children:s("top sales")}),e.exports.jsxs("select",{className:u("h-8  px-4 text-left text-sm capitalize  outline-none ",{"bg-orange text-white hover:bg-orange/80":a(x.price),"bg-white text-black hover:bg-slate-100":!a(x.price)}),value:l||"",onChange:p=>i(p.target.value),children:[e.exports.jsx("option",{value:"",disabled:!0,className:"bg-white text-black",children:s("price")}),e.exports.jsx("option",{value:k.asc,className:"bg-white text-black",children:s("price low to high")}),e.exports.jsx("option",{value:k.desc,className:"bg-white text-black",children:s("price high to low")})]})]})})})}const d=2;function M({queryConfig:t,pageSize:s}){const r=Number(t.page),c=()=>{let l=!1,a=!1;const n=p=>a?null:(a=!0,e.exports.jsx("span",{className:"mx-2 rounded border bg-white px-3 py-2 shadow-sm",children:"..."},p)),i=p=>l?null:(l=!0,e.exports.jsx("span",{className:"mx-2 rounded border bg-white px-3 py-2 shadow-sm",children:"..."},p));return Array(s).fill(0).map((p,g)=>{const o=g+1;if(r<=d*2+1&&o>r+d&&o<s-d+1)return i(g);if(r>d*2+1&&r<s-d*2){if(o<r-d&&o>d)return n(g);if(o>r+d&&o<s-d+1)return i(g)}else if(r>=s-d*2&&o>d&&o<r-d)return n(g);return e.exports.jsx(f,{to:{pathname:m.productList,search:h({...t,page:o.toString()}).toString()},className:u("mx-2 cursor-pointer rounded border bg-white px-3 py-2 shadow-sm",{"border-cyan-500":o===r,"border-transparent":o!==r}),children:o},g)})};return e.exports.jsxs("div",{className:"mt-6 flex flex-wrap justify-center",children:[r===1?e.exports.jsx("span",{className:"mx-2 cursor-not-allowed rounded border bg-white/60 px-3 py-2  shadow-sm",children:"Prev"}):e.exports.jsx(f,{to:{pathname:m.productList,search:h({...t,page:(r-1).toString()}).toString()},className:"mx-2 cursor-pointer rounded border bg-white px-3 py-2  shadow-sm",children:"Prev"}),c(),r===s?e.exports.jsx("span",{className:"mx-2 cursor-not-allowed rounded border bg-white/60 px-3 py-2  shadow-sm",children:"Next"}):e.exports.jsx(f,{to:{pathname:m.productList,search:h({...t,page:(r+1).toString()}).toString()},className:"mx-2 cursor-pointer rounded border bg-white px-3 py-2  shadow-sm",children:"Next"})]})}const Q={getCategories(){return C.get(R.categories)}},O=Q,V="/shopeeclone/assets/empty.27da84ba.png";function q(){const{t}=v(),s=D(),{data:r}=y({queryKey:["products",s],queryFn:()=>W.getProducts(s),placeholderData:H,staleTime:3*60*1e3}),{data:c}=y({queryKey:["categories"],queryFn:()=>O.getCategories()}),l=e.exports.jsxs(G,{children:[e.exports.jsxs("title",{children:[t("home")," | Shopee Clone"]}),e.exports.jsx("meta",{name:"description",content:"Trang ch\u1EE7 d\u1EF1 \xE1n Shopee Clone"})]});if(!r)return l;const a=r.data.data.products,n=a.length>0||a.length==0&&(s.price_min||s.price_max||s.rating_filter||s.category);return e.exports.jsxs("div",{className:"bg-gray-200 py-6",children:[l,e.exports.jsx("div",{className:"container",children:e.exports.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[n&&e.exports.jsx("div",{className:"col-span-3",children:e.exports.jsx(U,{queryConfig:{...s,page:"1"},categories:(c==null?void 0:c.data.data)||[]})}),a.length>0&&e.exports.jsxs("div",{className:"col-span-9",children:[e.exports.jsx(K,{queryConfig:s}),e.exports.jsx("div",{className:"mt-6 grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:a.map(i=>e.exports.jsx("div",{className:"col-span-1",children:e.exports.jsx(T,{product:i})},i._id))}),e.exports.jsx(M,{queryConfig:s,pageSize:r.data.data.pagination.page_size})]}),a.length==0&&e.exports.jsx("div",{className:u({"col-span-9":n,"col-span-12":!n}),children:e.exports.jsxs("div",{className:"flex h-[500px] flex-col items-center justify-center  p-2",children:[e.exports.jsx("img",{src:V,alt:"no purchase",className:"h-[160px] w-[160px]"}),e.exports.jsx("div",{className:"mt-3 capitalize",children:t("no_result_found")})]})})]})})]})}export{q as default};
